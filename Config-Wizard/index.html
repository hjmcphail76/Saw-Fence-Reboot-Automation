<!-- This wizard code is AI Assisted -->

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Config Wizard</title>
    <link rel="stylesheet" href="style.css" />
</head>

<body>
    <div class="container">
        <h1>üßô Config Wizard</h1>
        <form id="config-form">
            <label>
                Serial Monitor Baud Rate:
                <input type="text" name="serialBaud" value="115200" />
                <span class="note">Leave this as is unless you know what you're doing.</span>
            </label>

            <label>
                Screen Baud Rate:
                <input type="text" name="screenBaud" value="9600" />
                <span class="note">Leave this as is unless you know what you're doing.</span>
            </label>

            <label>
                Motor Pulses Per Revolution:
                <input type="text" name="motorPulses" value="1000" />
                <span class="note">Leave this as is unless you know what you're doing.</span>
            </label>

            <label>
                Default Boot Units:
                <select name="defaultUnit">
                    <option value="inches">Inches</option>
                    <option value="millimeters">Millimeters</option>
                </select>
            </label>

            <label>
                Screen Setup:
                <select name="screenType">
                    <option value="4D_systems">4D Systems Screen</option>
                    <option value="giga_shield">Giga Shield</option>
                </select>
            </label>

            <label>
                Motor Shaft Velocity (RPM):
                <input type="text" name="motorShaftVel" value="1000" />
            </label>

            <label>
                Motor Shaft Acceleration:
                <input type="text" name="motorShaftAccel" value="10000" />
            </label>

            <label>
                Mechanism Setup:
                <select name="mechanism" id="mechanism-select">
                    <option value="belt">Belt mechanism</option>
                    <option value="lead_screw">Lead screw mechanism</option>
                    <option value="rack_pinion">Rack and pinion mechanism</option>
                </select>
            </label>

            <div id="belt-fields" class="mechanism-fields">
                <label>
                    Pulley Diameter:
                    <input type="text" name="beltPulleyDiameter" />
                </label>
                <label>
                    Pulley Unit:
                    <select name="beltPulleyUnit">
                        <option value="inches">Inches</option>
                        <option value="millimeters">Millimeters</option>
                    </select>
                </label>
                <label>
                    Gearbox Reduction:
                    <input type="text" name="beltGearbox" value="1" />
                </label>
                <label>
                    Max Travel:
                    <input type="text" name="beltMaxTravel" />
                </label>
                <label>
                    Max Travel Unit:
                    <select name="beltMaxTravelUnit">
                        <option value="inches">Inches</option>
                        <option value="millimeters">Millimeters</option>
                    </select>
                </label>
            </div>

            <div id="lead_screw-fields" class="mechanism-fields" style="display:none;">
                <label>
                    Screw Pitch (Distance per Rev):
                    <input type="text" name="leadPitch" />
                </label>
                <label>
                    Pitch Unit:
                    <select name="leadPitchUnit">
                        <option value="inches">Inches</option>
                        <option value="millimeters">Millimeters</option>
                    </select>
                </label>
                <label>
                    Gearbox Reduction:
                    <input type="text" name="leadGearbox" value="1" />
                </label>
                <label>
                    Max Travel:
                    <input type="text" name="leadMaxTravel" />
                </label>
                <label>
                    Max Travel Unit:
                    <select name="leadMaxTravelUnit">
                        <option value="inches">Inches</option>
                        <option value="millimeters">Millimeters</option>
                    </select>
                </label>
            </div>

            <div id="rack_pinion-fields" class="mechanism-fields" style="display:none;">
                <label>
                    Pinion Diameter:
                    <input type="text" name="pinionDiameter" />
                </label>
                <label>
                    Pinion Unit:
                    <select name="pinionUnit">
                        <option value="inches">Inches</option>
                        <option value="millimeters">Millimeters</option>
                    </select>
                </label>
                <label>
                    Gearbox Reduction:
                    <input type="text" name="rackGearbox" value="1" />
                </label>
                <label>
                    Max Travel:
                    <input type="text" name="rackMaxTravel" />
                </label>
                <label>
                    Max Travel Unit:
                    <select name="rackMaxTravelUnit">
                        <option value="inches">Inches</option>
                        <option value="millimeters">Millimeters</option>
                    </select>
                </label>
            </div>

            <button type="submit">Generate JSON</button>
        </form>

        <a id="downloadLink" style="display: none;">‚¨áÔ∏è Download config.json</a>
    </div>

    <script>
        const mechSelect = document.getElementById("mechanism-select");
        const mechFields = {
            belt: document.getElementById("belt-fields"),
            lead_screw: document.getElementById("lead_screw-fields"),
            rack_pinion: document.getElementById("rack_pinion-fields")
        };

        mechSelect.addEventListener("change", () => {
            const selected = mechSelect.value;
            for (const key in mechFields) {
                mechFields[key].style.display = key === selected ? "block" : "none";
            }
        });

        document.getElementById("config-form").addEventListener("submit", function (e) {
            e.preventDefault();
            const formData = new FormData(e.target);

            const config = {
                serialMonitorBaud: formData.get("serialBaud") || "115200",
                screenBaud: formData.get("screenBaud") || "9600",
                motorPulsesPerRevolution: formData.get("motorPulses") || "1000",
                motorShaftVelocity: formData.get("motorShaftVel") || "1000",
                motorShaftAcceleration: formData.get("motorShaftAccel") || "10000",
                defaultUnit: formData.get("defaultUnit"),
                screenType: formData.get("screenType"),
                mechanism: formData.get("mechanism"),
                mechanismParameters: {}
            };

            switch (config.mechanism) {
                case "belt":
                    config.mechanismParameters = {
                        pulleyDiameter: formData.get("beltPulleyDiameter"),
                        unit: formData.get("beltPulleyUnit"),
                        gearboxReduction: formData.get("beltGearbox") || "1:1",
                        maxTravel: formData.get("beltMaxTravel"),
                        maxTravelUnit: formData.get("beltMaxTravelUnit")
                    };
                    break;
                case "lead_screw":
                    config.mechanismParameters = {
                        pitch: formData.get("leadPitch"),
                        unit: formData.get("leadPitchUnit"),
                        gearboxReduction: formData.get("leadGearbox") || "1:1",
                        maxTravel: formData.get("leadMaxTravel"),
                        maxTravelUnit: formData.get("leadMaxTravelUnit")
                    };
                    break;
                case "rack_pinion":
                    config.mechanismParameters = {
                        pinionDiameter: formData.get("pinionDiameter"),
                        unit: formData.get("pinionUnit"),
                        gearboxReduction: formData.get("rackGearbox") || "1:1",
                        maxTravel: formData.get("rackMaxTravel"),
                        maxTravelUnit: formData.get("rackMaxTravelUnit")
                    };
                    break;
            }

            const json = JSON.stringify(config, null, 2);
            const blob = new Blob([json], { type: "application/json" });
            const url = URL.createObjectURL(blob);

            const link = document.getElementById("downloadLink");
            link.href = url;
            link.download = "config.txt";
            link.style.display = "block";
            link.textContent = "‚¨áÔ∏è Download json config file";
        });
    </script>
</body>

</html>